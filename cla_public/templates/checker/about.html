{% extends "checker/base.html" %}
{% import "macros/element.html" as Element %}

{% block inner_content %}
  <h1 class="page-title">{{ title }}</h1>

  <div class="edge-warning" style="display:none">
    {% call Element.alert('error', icon='cross', title='This service does not currently support Microsoft Edge') %}
      <p>Please use an alternative browser if you are using Microsoft Edge.</p>
      <p>If you need information about installing a new browser, please visit the <a href="https://www.gov.uk/help/browsers">browser help page</a>.</p>
    {% endcall %}
  </div>

  <form method="POST">
    {{ form.csrf_token }}
    {{ Form.handle_errors(form) }}

    {% call Form.fieldset(form.have_partner, 'form-group') %}
      {{ Form.fieldset(form.in_dispute, 'form-group form-subfield', controlled_by=form.have_partner) }}
    {% endcall %}

    {{ Form.fieldset(form.on_benefits, 'form-group') }}

    {% call Form.fieldset(form.have_children, 'form-group') %}
      {{ Form.group(form.num_children, 'form-subfield',
          controlled_by=form.have_children, field_attrs={'class': 'm-small'}) }}
    {% endcall %}

    {% call Form.fieldset(form.have_dependants, 'form-group') %}
      {{ Form.group(form.num_dependants, 'form-subfield',
          controlled_by=form.have_dependants, field_attrs={'class': 'm-small'}) }}
    {% endcall %}

    {{ Form.fieldset(form.own_property, 'form-group') }}
    {{ Form.fieldset(form.is_employed, 'form-group') }}
    {{ Form.fieldset(form.partner_is_employed, 'form-group', controlled_by=form.in_dispute, control_value='0') }}
    {{ Form.fieldset(form.is_self_employed, 'form-group') }}
    {{ Form.fieldset(form.partner_is_self_employed, 'form-group', controlled_by=form.in_dispute, control_value='0') }}
    {{ Form.fieldset(form.aged_60_or_over, 'form-group') }}
    {{ Form.fieldset(form.have_savings, 'form-group') }}

    {% call Form.fieldset(form.have_valuables, 'form-group') %}
      {% include '_valuables-info.html' %}
    {% endcall %}

    {{ Form.honeypot(form) }}
    {{ Form.actions(_('Continue')) }}
  </form>
  {% include "checker/time-out-warning.html" %}
  {{ Element.get_in_touch_link() }}

  <script>
    window.CONDITIONAL_LABELS = {
      in_dispute: '{{ _('Are you in a dispute with your partner?') }}',
      num_children: '{{ _('How many?') }}',
      num_dependants: '{{ _('How many?') }}'
    };
  </script>

{% endblock %}


{% block javascripts %}
  {{ super() }}
  <script>
    if(window.navigator.userAgent.indexOf("Edge") > -1) {
        $('.edge-warning').show();
    }
  </script>
{% endblock %}
